# 📁 FastFoodTrainer 프로젝트 파일 구조 상세 설명

## 📂 전체 구조 개요

```
FastFoodTrainer/
├── .gitignore                          # Git 제외 파일 목록
├── LICENSE                             # MIT 라이선스
├── README.md                           # 프로젝트 소개 문서
│
├── FastFoodTrainer/                    # 메인 앱 소스 코드
│   ├── FastFoodTrainerApp.swift       # 앱 진입점 (@main)
│   │
│   ├── Core/                           # 핵심 인프라 레이어
│   │   ├── Models/
│   │   │   └── Models.swift           # 모든 데이터 모델 정의
│   │   │
│   │   ├── Services/
│   │   │   ├── ScenarioLoader.swift  # JSON 시나리오 로딩
│   │   │   ├── ProgressManager.swift # 사용자 진행 상황 관리
│   │   │   └── ScoreCalculator.swift # 점수 계산 로직
│   │   │
│   │   └── Common/
│   │       └── Extensions/
│   │           └── Color+Theme.swift  # 테마 컬러 정의
│   │
│   ├── Features/                       # 기능별 모듈
│   │   ├── Onboarding/
│   │   │   └── OnboardingView.swift  # 온보딩 화면
│   │   │
│   │   └── MainHub/
│   │       └── MainHubView.swift     # 메인 허브 화면
│   │
│   └── Resources/                      # 리소스 파일
│       └── Scenarios/                 # JSON 시나리오
│           ├── day1.json             # Day 1 시나리오 (완성)
│           ├── day2.json ~ day7.json # Day 2-7 플레이스홀더
│           └── tips.json             # 꿀팁 데이터
│
└── FastFoodTrainerTests/               # 테스트 폴더
    └── (테스트 파일 추가 예정)
```

---

## 📄 주요 파일 상세 설명

### 1️⃣ FastFoodTrainerApp.swift
**역할:** 앱의 진입점
- `@main` 어노테이션으로 앱 시작점 지정
- `ProgressManager`를 `@StateObject`로 생성하여 앱 전역 관리
- 사용자 닉네임 유무에 따라 온보딩 또는 메인 화면 표시
- 네비게이션 바 외관 설정

**주요 코드:**
```swift
@main
struct FastFoodTrainerApp: App {
    @StateObject private var progressManager = ProgressManager.shared
    
    var body: some Scene {
        WindowGroup {
            if progressManager.userNickname.isEmpty {
                OnboardingView()
            } else {
                MainHubView()
            }
        }
    }
}
```

---

### 2️⃣ Core/Models/Models.swift
**역할:** 모든 데이터 구조 정의

**포함된 모델:**
- `DayScenario`: 하루 학습 시나리오 전체
- `Stage`: 게임 세션 단위
- `Order`: 고객 주문 정보
- `OrderItem`: 개별 메뉴 아이템
- `MenuItem`: 메뉴 마스터 데이터
- `Tip`: 현직자 꿀팁
- `DayProgress`: 사용자 진행 상황
- `Grade`: 등급 (S/A/B/C/D)
- `ScoreComponents`: 점수 구성 요소
- `GameResult`: 게임 결과
- `Mistake`: 실수 기록

**특징:**
- 모든 모델이 `Codable` 준수 → JSON 직렬화 가능
- `Identifiable` 준수 → SwiftUI List에서 사용 가능
- 한국어 주석으로 각 프로퍼티 설명

---

### 3️⃣ Core/Services/ScenarioLoader.swift
**역할:** JSON 파일 로딩 및 디코딩

**주요 기능:**
- `loadAllScenarios()`: Day 1~7 전체 로드
- `loadScenario(filename:)`: 특정 Day 로드
- `loadTips()`: 팁 데이터 로드
- `loadMenuItems()`: 메뉴 마스터 데이터 로드

**에러 처리:**
- `ScenarioError` enum으로 구체적 에러 타입 정의
- 사용자 친화적인 한국어 에러 메시지
- 개별 파일 로드 실패 시에도 계속 진행

**사용 예:**
```swift
let loader = ScenarioLoader.shared
let scenarios = try await loader.loadAllScenarios()
```

---

### 4️⃣ Core/Services/ProgressManager.swift
**역할:** 사용자 진행 상황 영구 저장 및 관리

**저장 데이터:**
- 닉네임
- Day별 완료 여부, 최고 점수, 최고 등급
- 플레이 횟수, 마지막 플레이 날짜
- 언락된 팁 목록

**주요 메서드:**
- `updateDayResult()`: Day 완료 후 점수 업데이트
- `isDayUnlocked()`: 순차적 언락 체크
- `calculateOverallProgress()`: 전체 진행률 (0.0~1.0)
- `resetAllProgress()`: 데이터 초기화

**싱글톤 패턴:**
```swift
class ProgressManager: ObservableObject {
    static let shared = ProgressManager()
    private init() { ... }
}
```

---

### 5️⃣ Core/Services/ScoreCalculator.swift
**역할:** 게임 결과 점수 계산

**계산 항목:**
1. **정확도 (40점)**: 주문 오류율 기반
2. **속도 (30점)**: 평균 처리 시간 기반
3. **만족도 (20점)**: 고객 만족도 평균
4. **절차 준수 (10점)**: 위생/안전 위반 횟수

**최종 점수 → 등급 변환:**
- 95~100점: S등급
- 85~94점: A등급
- 70~84점: B등급
- 60~69점: C등급
- 60점 미만: D등급

---

### 6️⃣ Core/Common/Extensions/Color+Theme.swift
**역할:** 앱 전역 테마 컬러 정의

**정의된 컬러:**
```swift
static let primaryBlue = Color(hex: "1E3A8A")     // 메인 블루
static let accentGold = Color(hex: "F59E0B")      // 액센트 골드
static let backgroundGray = Color(hex: "F5F5F7")  // 배경 회색
static let primaryDark = Color(hex: "1F2937")     // 텍스트 다크
static let secondaryGray = Color(hex: "6B7280")   // 텍스트 회색
```

**Hex 문자열 → Color 변환 유틸리티 포함**

---

### 7️⃣ Features/Onboarding/OnboardingView.swift
**역할:** 첫 실행 시 온보딩 화면

**구성:**
- **페이지 1**: 앱 소개, 핵심 기능 3가지
- **페이지 2**: 닉네임 입력 (2~10자 검증)

**UX:**
- TabView로 페이지 스와이프
- 그라데이션 배경 (블루 계열)
- SF Symbols 아이콘 사용
- 입력 검증 후 버튼 활성화

**완료 후:** `ProgressManager`에 닉네임 저장 → 메인 화면 이동

---

### 8️⃣ Features/MainHub/MainHubView.swift
**역할:** 메인 허브 화면 (Day 리스트)

**구성:**
- 사용자 인사말
- 전체 진행률 프로그레스 바
- Day 1~7 카드 리스트
- 각 Day의 제목, 설명, 완료 상태 표시

**ViewModel 패턴:**
- `MainHubViewModel`이 비즈니스 로직 담당
- 비동기로 시나리오 로드
- 로딩/성공/실패 상태 관리

---

### 9️⃣ Resources/Scenarios/day1.json
**역할:** Day 1 완전한 시나리오 데이터

**구조:**
```json
{
  "id": "day1",
  "dayNumber": 1,
  "title": "첫 출근, 기본기 익히기",
  "learningGoals": [...],
  "stages": [
    {
      "orders": [
        {
          "customerName": "상냥한 손님",
          "requestText": "안녕하세요! 킹스 클래식 버거 하나만 주세요.",
          "items": [...]
        }
      ]
    }
  ]
}
```

**특징:**
- 3개의 Order 포함 (난이도 순차 증가)
- 고객 성격(Mood) 다양화
- 옵션 포함 주문 (양상추 빼기)

---

### 🔟 Resources/Scenarios/tips.json
**역할:** 현직자 꿀팁 데이터

**예시:**
```json
{
  "id": "tip_greeting",
  "title": "첫인사가 중요해요",
  "body": "손님이 오시면 먼저 눈을 맞추고...",
  "category": "greeting",
  "author": "3년차 알바 김OO"
}
```

**활용:**
- Day 완료 시 관련 팁 언락
- 결과 화면에서 자동 매칭 표시

---

## 🏗️ 추가 구현 필요 파일

### 우선순위 높음:
1. **CounterGameView.swift** - 카운터 게임 플레이 화면
2. **GameSessionViewModel.swift** - 게임 세션 관리
3. **ResultSummaryView.swift** - 결과 및 피드백 화면
4. **day2.json ~ day7.json** - 나머지 시나리오

### 우선순위 중간:
5. **KitchenGameView.swift** - 주방 조리 화면
6. **SettingsView.swift** - 설정 화면
7. **DayDetailView.swift** - Day 상세 설명 화면

### 추가 리소스:
8. **Assets.xcassets** - 앱 아이콘, 이미지
9. **Sounds/** - 효과음, BGM
10. **Tests/** - 유닛 테스트, UI 테스트

---

## 🎯 아키텍처 흐름

```
View (SwiftUI)
   ↓ 사용자 액션
ViewModel (ObservableObject)
   ↓ 비즈니스 로직
Service (ScenarioLoader, ProgressManager, ScoreCalculator)
   ↓ 데이터 처리
Model (Codable Structs)
```

**의존성 방향:** View → ViewModel → Service → Model

**상태 관리:**
- `@StateObject`: ViewModel 소유
- `@ObservedObject`: 전달받은 객체
- `@EnvironmentObject`: 앱 전역 상태
- `@Published`: 자동 UI 업데이트

---

## 💡 개발 팁

### 새 화면 추가 시:
1. `Features/` 아래 폴더 생성
2. `View.swift` + `ViewModel.swift` 쌍으로 생성
3. ViewModel은 `ObservableObject` 준수
4. 필요한 Service 주입

### JSON 데이터 수정 시:
1. 해당 JSON 파일 편집
2. 모델 구조 변경 필요시 `Models.swift` 수정
3. 빌드 후 테스트

### 새 기능 추가 시:
1. 관련 Model 먼저 정의
2. Service 로직 구현
3. ViewModel 연동
4. View 구현
5. 테스트 코드 작성

---

## 📚 참고 문서

- **프로젝트 README**: 전체 개요
- **GitHub 푸시 가이드**: 배포 방법
- **이 문서**: 파일 구조 상세

---

**작성일:** 2025-01-13  
**버전:** 1.0  
**작성자:** FastFoodTrainer Development Team
